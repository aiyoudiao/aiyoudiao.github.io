(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{540:function(t,s,a){"use strict";a.r(s);var n=a(19),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("React 默认没带数据流（状态管理），那些实现了数据流的库不光可以在react中使用，也可以在vue中使用。"),a("br"),t._v("\n在react中flux叫rflux，flux中有多个store。"),a("br"),t._v("\nredux与flux不同，它只有一个单一的store。整个应用的state存储在一个单一的store树中。"),a("br"),t._v("\nmbox是一个状态管理机制，是全自动的，action一改变state，views上就直接发生变化，不需要你像redux一样去写reducer函数了。")]),t._v(" "),a("p",[t._v("这篇文章主要讲的是redux相关的内容，其它的状态管理库，实现的功能都是一样的，只是使用起来不同，但思想大同小异。学会一个，其它看看官网了就理解了。")]),t._v(" "),a("h2",{attrs:{id:"redux-概念简述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux-概念简述"}},[t._v("#")]),t._v(" Redux 概念简述")]),t._v(" "),a("p",[t._v("React 是一个简单的轻量级的视图层的框架，内置的组件（同级的组件）传值太麻烦了，而且它需要依赖很多的框架才能去实现大项目的构建。"),a("br"),t._v("\n如果你想使用 React 去做一个大的应用，必须使用一个配套的数据层的框架来结合使用才行，这个数据层的框架可以是 Redux。"),a("br"),t._v("\n将组件中的数据存储到一个公共的区域，其它组件需要数据的话，直接到这个公共的存储区域中拿一下即可。"),a("br"),t._v(" "),a("code",[t._v("Redux=Reducer+Flux")]),t._v("，Flux 是 13 年开源的时候 FaceBook 放出来和 React 一起使用的数据层框架。Flux 不好用，有人把 Flux 做了一个升级，升级之后就叫 Redux。")]),t._v(" "),a("h2",{attrs:{id:"redux-的工作流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux-的工作流程"}},[t._v("#")]),t._v(" Redux 的工作流程")]),t._v(" "),a("p",[a("code",[t._v("ReactComponent")]),t._v(" 、"),a("code",[t._v("ActionCreators")]),t._v("、"),a("code",[t._v("Strore")]),t._v("、"),a("code",[t._v("Reducers")])]),t._v(" "),a("ol",[a("li",[a("code",[t._v("ReactComponent")]),t._v("：借书的人")]),t._v(" "),a("li",[a("code",[t._v("ActionCreators")]),t._v("：借书时说的话")]),t._v(" "),a("li",[a("code",[t._v("Strore")]),t._v("：图书馆的管理员")]),t._v(" "),a("li",[a("code",[t._v("Reducers")]),t._v("：图书记录本")])]),t._v(" "),a("p",[t._v("Redux 的工作流程：")]),t._v(" "),a("ol",[a("li",[t._v("首先 "),a("code",[t._v("ReactComponent")]),t._v(" 创建一个"),a("code",[t._v("ActionCreator")]),t._v("命令")]),t._v(" "),a("li",[t._v("通过"),a("code",[t._v("ActionCreator")]),t._v("命令向"),a("code",[t._v("Strore")]),t._v("发起请求")]),t._v(" "),a("li",[a("code",[t._v("Strore")]),t._v("接收到请求后去"),a("code",[t._v("Reducers")]),t._v("查询对应的数据")]),t._v(" "),a("li",[t._v("从"),a("code",[t._v("Reducers")]),t._v("查询到对应的数据查询后由"),a("code",[t._v("Strore")]),t._v("将对应的数据返回给"),a("code",[t._v("ReactComponent")])])]),t._v(" "),a("h2",{attrs:{id:"使用-antd-编写-todolist-页面布局"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-antd-编写-todolist-页面布局"}},[t._v("#")]),t._v(" 使用 antd 编写 TodoList 页面布局")]),t._v(" "),a("p",[a("strong",[t._v("安装 antd")])]),t._v(" "),a("p",[t._v("使用命令："),a("code",[t._v("npm install antd --save")]),t._v(" 或者 "),a("code",[t._v("yarn add antd")]),a("br"),t._v("\n使用 "),a("code",[t._v("antd")]),t._v("，"),a("code",[t._v("引入组件")]),t._v("，"),a("code",[t._v("引入css")]),t._v("，"),a("code",[t._v("直接使用组件")]),t._v("即可，可以"),a("code",[t._v("去官网找对应的组件")]),t._v("，"),a("code",[t._v("复制代码")]),t._v("简单使"),a("code",[t._v("用一下")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Input "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Button"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" List "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'antd'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../node_modules/antd/dist/antd.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Racing car sprays burning fuel into crowd.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Japanese princess to wed commoner.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Australian walks 100km after outback crash.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Man charged over missing wedding girl.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Los Angeles battles huge wildfires.'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TodoList")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div style "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("margin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'10px 0px 0px 10px'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"500px"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v('\n                <Input placeholder = "请输入内容"  style = ')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("marginRight"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'10px'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"350px"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v('/>\n                <Button type = "primary" style = ')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"120px"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v(">Primary")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Button")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n                <List\n                    bordered\n                    dataSource = ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n                    style = ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("width"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'350px'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" marginTop"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'10px'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n                    renderItem = ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("item "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List.Item")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List.Item")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n                    />\n                ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("它常用于开发后台，可以用它开发出很漂亮的后台页面")]),t._v(" "),a("h2",{attrs:{id:"创建-redux-中的-store"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建-redux-中的-store"}},[t._v("#")]),t._v(" 创建 redux 中的 store")]),t._v(" "),a("p",[t._v("首先安装 "),a("code",[t._v("redux")]),t._v("："),a("code",[t._v("yarn add redux")]),t._v(" 或者 "),a("code",[t._v("npm i redux --save")]),a("br"),t._v("\n新建一个"),a("code",[t._v("store")]),t._v("文件夹，新建一个"),a("code",[t._v("index.js")]),t._v("和"),a("code",[t._v("redcer.js")])]),t._v(" "),a("p",[a("strong",[t._v("index.js 图书管理员")])]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createStore "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" reducer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./reducer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("redcer.js 图书记录本")])]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" defaultState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    list"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("321")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    inputValue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'789'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" defaultState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// state中存放的是整个图书馆中存放的书籍的信息")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("需要"),a("code",[t._v("用的时候")]),t._v("直接"),a("code",[t._v("引")]),t._v("入这个"),a("code",[t._v("index.js")]),t._v("，然后通过"),a("code",[t._v("对象.getState()")]),t._v("方法，就能够"),a("code",[t._v("获取")]),t._v("到"),a("code",[t._v("store")]),t._v("中的"),a("code",[t._v("内容")]),t._v("了,之后你就可以"),a("code",[t._v("直接")]),t._v("使"),a("code",[t._v("用数据")]),t._v("了。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//import store from './store/index.js'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 简写成这样也可以")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./store'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("引入 "),a("code",[t._v("store")]),t._v(" ，直接通过"),a("code",[t._v("store")]),t._v("来"),a("code",[t._v("获取")]),t._v("数据或者"),a("code",[t._v("修改")]),t._v("数据，"),a("code",[t._v("store")]),t._v("是一个"),a("code",[t._v("公共的数据层对象")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"action-和-reducer-的编写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#action-和-reducer-的编写"}},[t._v("#")]),t._v(" Action 和 Reducer 的编写")]),t._v(" "),a("p",[t._v("安装谷歌浏览器插件："),a("code",[t._v("Redux DevTools")])]),t._v(" "),a("p",[t._v("使用浏览器开发人员工具点击选项卡 "),a("code",[t._v("Redux")]),a("br"),t._v("\n如果你没有配置，那么你就将  "),a("code",[t._v("window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()")]),t._v("  粘贴到"),a("code",[t._v("createStore(reducer)")]),t._v("的第二个参数中去")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__REDUX_DEVTOOLS_EXTENSION__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("__REDUX_DEVTOOLS_EXTENSION__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("code",[t._v("__REDUX_DEVTOOLS_EXTENSION__")]),t._v("也是"),a("code",[t._v("Redux")]),t._v("的一个"),a("code",[t._v("中间件")]),t._v("。")]),t._v(" "),a("p",[a("code",[t._v("深拷贝")]),t._v("一个"),a("code",[t._v("对象")]),t._v("："),a("code",[t._v("JSON.parse(JSON.stringify(obj))")]),t._v(";"),a("br"),t._v("\n首先创建一个 "),a("code",[t._v("store")]),t._v("对象并且传递一个"),a("code",[t._v("reducer")]),t._v("对象进去"),a("br"),t._v(" "),a("code",[t._v("reducer")]),t._v("实际上一个函数，"),a("code",[t._v("store")]),t._v("在创建的时候将这个函数传递进去了")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" defaultState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    list"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("321")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    inputValue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'789'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" defaultState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 根据行动指令执行对应的操作")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"changeInputValue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reducer 只能够获取state里面的值 绝对不能修改里面的值")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        newState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inputValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" newState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"addListItem"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        newState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inputValue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        newState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inputValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" newState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// state中存放的是整个图书馆中存放的书籍的信息")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("当"),a("code",[t._v("store")]),t._v("进行"),a("code",[t._v("dispatch")]),t._v("方法调度的时候就会去执行"),a("code",[t._v("reducer")]),t._v("了")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleChange")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" action "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"changeInputValue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("执行"),a("code",[t._v("reducer")]),t._v("会对全局的"),a("code",[t._v("state")]),t._v("进行修改")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 根据行动指令执行对应的操作")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"changeInputValue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reducer 只能够获取state里面的值 绝对不能修改里面的值")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    newState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inputValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" newState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("你可以通过"),a("code",[t._v("store.getState()")]),t._v("来获取全局的"),a("code",[t._v("state")]),t._v("对象")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("你可以通过"),a("code",[t._v("store.subscribe")]),t._v("来进行监听全局 store 的改变，传递进去的回调函数中你可以调用"),a("code",[t._v("this.setState()")]),t._v("来让页面的组件"),a("code",[t._v("重新渲染")])]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleStoreChange "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleStoreChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听 store中的状态改变")]),t._v("\nstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleStoreChange"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleStoreChange")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"store changed"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("最后就达到了使用 redux 中 store 里的全局状态进行传值的目的了。")]),t._v(" "),a("h2",{attrs:{id:"使用-redux-完成-todolist-删除功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-redux-完成-todolist-删除功能"}},[t._v("#")]),t._v(" 使用 Redux 完成 TodoList 删除功能")]),t._v(" "),a("p",[t._v("遍历生成 item 的时候，绑定事件并传递对应的下标，通过 distach 方法进行指令的传递，reducer 中根据执行进行全局状态的间接更改，最后组件中监听全局状态的方法里调用 this.setState(store.getState())重新渲染组件。")]),t._v(" "),a("h2",{attrs:{id:"actiontypes-的拆分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#actiontypes-的拆分"}},[t._v("#")]),t._v(" ActionTypes 的拆分")]),t._v(" "),a("p",[t._v("为了防止的你 action.type 中的字符串写错，你可以定义一个常量与对应的字符串相对应，这样相当于定义了一个规范，不仅利于编写，也利于排错。"),a("br"),t._v("\n你创建一个单独的文件，里面存放这些字符串对应的常量，页面中也可以引入这个文件，reducer 中也可以引入这个文件。"),a("br"),t._v("\n这样一来，你不用担心页面或者 reducer 中的字符串写错了而导致无法达到预期的效果了。")]),t._v(" "),a("h2",{attrs:{id:"使用-actioncreator-统一创建-action"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-actioncreator-统一创建-action"}},[t._v("#")]),t._v(" 使用 actionCreator 统一创建 action")]),t._v(" "),a("p",[t._v("将所有的 action 进行统一的管理，这么做的好处是分层，这样利于管理，可以提高代码的可维护性，很像三层架构中"),a("code",[t._v("模型层")]),t._v("、"),a("code",[t._v("数据访问层")]),t._v("、"),a("code",[t._v("业务逻辑层")]),t._v("里的"),a("code",[t._v("数据访问层")]),t._v("。")]),t._v(" "),a("p",[t._v("这样一想，UI 组件就是 UI 层，容器组件就是业务逻辑层，模型层和数据访问层就是"),a("code",[t._v("Redux")]),t._v("中的"),a("code",[t._v("reducer")]),t._v("、"),a("code",[t._v("store")]),t._v("、"),a("code",[t._v("actionCretor")]),t._v("（就像"),a("code",[t._v("EntityFrameWork")]),t._v("通过"),a("code",[t._v("linq")]),t._v("来操作数据库一样）。")]),t._v(" "),a("p",[t._v("并且做自动化测试的时候也会很方便。使用方法来进行管理，每一个"),a("code",[t._v("action")]),t._v("对应一个方法，页面组件只需要调用对应的方法传递数据即可，将对应的指令封装到方法中了，你可以调用方法返回指令，也可以直接在那个方法中直接调用"),a("code",[t._v("store.disptach(指令)")]),t._v("。")]),t._v(" "),a("p",[a("code",[t._v("React")]),t._v("中 "),a("code",[t._v("数据与视图分离")]),t._v("，但是"),a("code",[t._v("JS逻辑和视图")]),t._v("是"),a("code",[t._v("混在一起")]),t._v("的。")]),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[a("code",[t._v("store")]),t._v(" 是唯一的，在 store 文件夹下的 index.js 文件被创建，全局共享一个，这里面使用一个单例模式。")]),t._v(" "),a("p",[t._v("只有 store 能够改变自己的内容，不要在"),a("code",[t._v("reducer.js")]),t._v("中去改变"),a("code",[t._v("state")]),t._v("，你"),a("code",[t._v("只能深度克隆state")]),t._v("，然后"),a("code",[t._v("修改")]),t._v("你"),a("code",[t._v("newState")]),t._v("后再"),a("code",[t._v("return newState")]),t._v("，这时候"),a("code",[t._v("store")]),t._v("接"),a("code",[t._v("收到")]),t._v("你的"),a("code",[t._v("返回")]),t._v("的"),a("code",[t._v("newState")]),t._v("之后就"),a("code",[t._v("会")]),t._v("去"),a("code",[t._v("改变")]),t._v("自己的"),a("code",[t._v("state")]),t._v("了。这是一个规范，就是这么定的。")]),t._v(" "),a("h3",{attrs:{id:"reducer-必须是纯函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reducer-必须是纯函数"}},[t._v("#")]),t._v(" Reducer 必须是纯函数")]),t._v(" "),a("p",[t._v("纯函数指的是，给定固定的输入，就一定会有固定的输出，而且不会有任何副作用。"),a("br"),t._v("\n也就是给定"),a("code",[t._v("state")]),t._v("和"),a("code",[t._v("action")]),t._v("就会返回"),a("code",[t._v("newState")]),t._v("，但是"),a("code",[t._v("newState")]),t._v("中的属性，是根据"),a("code",[t._v("state")]),t._v("和"),a("code",[t._v("action")]),t._v("来进行确定的，不会受到其它的影响也不能受到其它的影响，如果受到了就不是纯函数了。"),a("br"),t._v("\n只要一个函数中存在 与"),a("code",[t._v("日期相关")]),t._v("的函数或者有"),a("code",[t._v("setTimeOut")]),t._v("就"),a("code",[t._v("不再是")]),t._v("一个"),a("code",[t._v("纯函数")]),t._v("了，因为这些会让这个函数受到其它的影响，不再是固定的输入就有固定的输出。"),a("br"),t._v("\nReducer 里面不能有异步的操作和与时间相关的操作，对方法传递进来的参数直接做修改就是"),a("code",[t._v("副作用")]),t._v("，"),a("code",[t._v("Reducer")]),t._v("中"),a("code",[t._v("不允许")]),t._v("有"),a("code",[t._v("副作用")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"redux-中核心的-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redux-中核心的-api"}},[t._v("#")]),t._v(" Redux 中核心的 API")]),t._v(" "),a("p",[a("code",[t._v("createStore")]),t._v(" 用来创建 "),a("code",[t._v("store")]),a("br"),t._v(" "),a("code",[t._v("store.dispatch")]),t._v("用来派发"),a("code",[t._v("action")]),t._v("，"),a("code",[t._v("store")]),t._v("会接收这个"),a("code",[t._v("action")]),t._v("，并且根据它来进行"),a("code",[t._v("state")]),t._v("的改变"),a("br"),t._v(" "),a("code",[t._v("store.getState")]),t._v(" 获取"),a("code",[t._v("store")]),t._v("中的"),a("code",[t._v("state")]),a("br"),t._v(" "),a("code",[t._v("store.subscribe")]),t._v(" 用来监听"),a("code",[t._v("store中state")]),t._v("的变化")]),t._v(" "),a("p",[t._v("只要"),a("code",[t._v("store")]),t._v("发生改变，就会触发"),a("code",[t._v("subscribe")]),t._v("中的"),a("code",[t._v("回调")]),t._v("函数")]),t._v(" "),a("h2",{attrs:{id:"拓展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拓展"}},[t._v("#")]),t._v(" 拓展")]),t._v(" "),a("p",[t._v("以上已经把redux的基础使用做了一下了解，那么简单拓展一下flux和mbox的设计思想。")]),t._v(" "),a("p",[a("strong",[t._v("flux")])]),t._v(" "),a("p",[t._v("UI产生动作消息，将动作传递给分发器。（这个动作就是 比如 点击一个按钮或者ajax返回数据）\n分发器广播给所有store。（以广播的方式告诉所有store。）\n订阅的store做出反应，传递新的state给UI。"),a("br"),t._v("\n在react中flux叫rflux，flux中有多个store。")]),t._v(" "),a("p",[a("strong",[t._v("redux")])]),t._v(" "),a("p",[t._v("redux与flux不同，它只有一个单一的store。整个应用的state存储在一个单一的store树中。"),a("br"),t._v("\nstate状态为只读，你不能直接修改state，应该要通过action触发state修改。"),a("br"),t._v("\n得使用纯函数进行状态修改，需要你写reducers纯函数来进行处理，reducer通过当前状态树和action来进行计算，返回一个新的state。（这个reducer可以当它是一个merge函数，merge完了之后返回一个新的state来更新掉那个旧的。）"),a("br"),t._v("\n不过如果一个应用的state都存到一个store中，那么效率就会很低，于是它提出了一个分支的概念，不同的state放到不同的分支上。")]),t._v(" "),a("p",[t._v("redux："),a("a",{attrs:{href:"https://react-redux.js.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://react-redux.js.org/"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("strong",[t._v("flux 和 redux不同")])]),t._v(" "),a("p",[t._v("flux和redux都可以作为react的状态管理，flux是多store，redux是单store。"),a("br"),t._v("\nflux有调度器来进行事件处理，redux依赖reducer来实现事件处理。"),a("br"),t._v("\nflux的state可以直接修改，redux 的state不能直接修改，要通过reducer进行state的merge方式来产生一个新的state。")]),t._v(" "),a("p",[a("strong",[t._v("mbox")])]),t._v(" "),a("p",[t._v("mbox是一个状态管理机制，是全自动的，action一改变state，views上就直接发生变化，不需要你像redux一样去写reducer函数了。"),a("br"),t._v("\n定义状态并使其可观察，使用修饰符@observer来使其可观察。"),a("br"),t._v("\n创建视图以响应状态变化。"),a("br"),t._v("\n更改状态（自动响应UI变化）。")]),t._v(" "),a("p",[t._v("mobx："),a("a",{attrs:{href:"https://cn.mobx.js.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cn.mobx.js.org/"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);