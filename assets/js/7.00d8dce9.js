(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{290:function(t,c,e){},332:function(t,c,e){"use strict";e(290)},346:function(t,c,e){"use strict";e.r(c);e(99);var i={name:"ImageShuffle",data:()=>({adding:!1,loading:!1,getSister:n(),imgs:[],imgHeights:[],imgsLoaded:!1,leftImgIndexes:[],rightImgIndexes:[]}),async mounted(){this.loading=!0;const t=this.getSister();await p(t),this.imgs=t,this.loading=!1},methods:{async add(){if(this.adding)return;this.adding=!0;const t=this.getSister();await p(t),this.adding=!1,this.scheduleAnimation(()=>{this.imgs=t.concat(this.imgs)})},shuffle(){this.scheduleAnimation(()=>{this.imgs=r(this.imgs)})},scheduleAnimation(t){const c=this.$refs.imgs.slice(),e=this.createSrcRectMap(c);console.info("prevSrcRectMap",e),t(),this.$nextTick(()=>{const t=this.createSrcRectMap(c);console.info("createSrcRectMap",t),Object.keys(e).forEach(c=>{const i=t[c],a=e[c],s=[{transform:`translate(${a.left-i.left}px, ${a.top-i.top}px)`},{transform:"translate(0, 0)"}],n=i.img.animate(s,{duration:300,easing:"cubic-bezier(0,0,0.32,1)"});console.info(n)})})},reset(){this.getSister=n(),this.imgs=this.getSister()},createSrcRectMap:t=>t.reduce((t,c)=>{const e=c.getBoundingClientRect(),{left:i,top:a}=e;return t[c.src]={left:i,top:a,img:c},t},{})}};const a=["https://pic1.zhimg.com/v2-ca51a8ce18f507b2502c4d495a217fa0_r.jpg","https://pic1.zhimg.com/v2-c90799771ed8469608f326698113e34c_r.jpg","https://pic1.zhimg.com/v2-8d3dd83f3a419964687a028de653f8d8_r.jpg","https://pic1.zhimg.com/v2-09eefac19ac282684f60a202aa9abb2c_r.jpg","https://pic2.zhimg.com/v2-37860484a1a73257178e95267c7db641_r.jpg","https://pic2.zhimg.com/v2-7fc30291c807d07d2d26c5a8ffdd3b89_r.jpg","https://pic4.zhimg.com/v2-02efe89495be4f68f6b7b6c510da36cf_r.jpg","https://pic4.zhimg.com/v2-aeadbc3d02af2631e3a7acd0dc72b01b_r.jpg","https://pic3.zhimg.com/v2-a71fad6a1fee2614ad95a4bae0376eb6_r.jpg","https://pic3.zhimg.com/v2-861f71f28e361237003aa1c88188f326_r.jpg","https://pic4.zhimg.com/v2-525c8002eb619387e7a31f67169f8a2b_r.jpg","https://pic4.zhimg.com/v2-0dcbcf5a48a97afab7439e09af65c98f_r.jpg","https://pic1.zhimg.com/v2-d640737ff5eac65fe30375f324512d00_r.jpg","https://pic1.zhimg.com/v2-6e92b4576b93302ad5fe04c7e95e375c_r.jpg","https://pic1.zhimg.com/v2-5e4a1221996179cbacc5d7450d25f908_r.jpg","https://pic3.zhimg.com/v2-7f58a7d6e8b1ed3f653a96ae9d6e1e2e_r.jpg","https://pic4.zhimg.com/v2-fb767fd3f56591a3c4b2b4089c47776f_r.jpg","https://pic2.zhimg.com/v2-6b9847e11d3a8cac8ac0ef52bffd9af5_r.jpg","https://pic2.zhimg.com/v2-6f2119f99200fc61abc246eea36f25b1_r.jpg","https://pic4.zhimg.com/v2-2103acaf025ceda331a0dd59022443ab_r.jpg","https://pic2.zhimg.com/v2-edc1b118c420939c545b1449344139b5_r.jpg","https://pic2.zhimg.com/v2-d94530f491f23c61659ef458ac8a9db5_r.jpg","https://pic2.zhimg.com/v2-ff15820a9c1cb8e2bb0af1048ea81145_r.jpg","https://pic4.zhimg.com/v2-a8fb0a1d8581e4bfce905791271711c7_r.jpg","https://pic2.zhimg.com/v2-1008cd2c72129809cc348cdc04310475_r.jpg"],s=[1,2,3,4],n=()=>{const t=a.slice();let c=!0;return()=>{if(c)return c=!1,t.splice(0,8);const e=o(0,s.length-1);return t.splice(0,s[e])}},p=t=>new Promise(c=>{t.length||c();const e=t.length;let i=0;t.forEach(t=>{const a=new Image,s=()=>{i++,i===e&&c()};a.onload=s,a.onerror=s,a.src=t})}),o=(t,c)=>Math.floor(Math.random()*(c-t+1)+t),r=t=>{let c=t.slice();for(let t=0;t<c.length;t++){let e=o(0,t),i=c[t];c[t]=c[e],c[e]=i}return c};var g=i,h=(e(332),e(3)),d=Object(h.a)(g,(function(){var t=this,c=t._self._c;return c("div",{staticClass:"image-shuffle"},[c("div",{staticClass:"action"},[c("button",{on:{click:t.add}},[c("span",{directives:[{name:"show",rawName:"v-show",value:t.adding,expression:"adding"}]},[t._v("下载中……")]),t._v(" "),c("span",{directives:[{name:"show",rawName:"v-show",value:!t.adding,expression:"!adding"}]},[t._v("追加图片")])]),t._v(" "),c("button",{on:{click:t.shuffle}},[t._v("乱序图片")]),t._v(" "),c("button",{on:{click:t.reset}},[t._v("重置")])]),t._v(" "),t.loading?c("div",{staticClass:"loading"},[t._v("正在加载图片……")]):c("div",{staticClass:"wrap"},t._l(t.imgs,(function(t){return c("div",{key:t,staticClass:"img-wrap"},[c("img",{ref:"imgs",refInFor:!0,staticClass:"img",attrs:{src:t}})])})),0)])}),[],!1,null,"1cd58ad8",null);c.default=d.exports}}]);