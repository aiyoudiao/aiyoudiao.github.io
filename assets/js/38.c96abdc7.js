(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{373:function(t,s,a){"use strict";a.r(s);var e=a(3),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("今天协助同事解决了一个问题，就是react-daterange-picker 和 react-date-picker 在@material-ui的dialog中出现选择日历点击一次就直接关闭的问题。")]),t._v(" "),s("p",[t._v("通过查看源码后发现，在picker组件中对document的mousedown、focusin、touchstart进行了全局监听，只要这三个事件触发了，就会判断触发该事件的src Element是否在picker组件范围内，如果不在就会关闭该picker组件。")]),t._v(" "),s("p",[t._v("在mui中，默认做了自动聚焦的操作，当事件冒泡触发到mui的dialog组件之后，dialog组件会去检查当前聚焦的srcElement是否是它自己，如果不是的话，就会调用focus方法，如此一来才会出现那种问题。")]),t._v(" "),s("p",[t._v("解决办法除了看picker组件的源码之外，还查阅了(mui的官方文档#焦点陷阱)[https://v4.mui.com/zh/components/modal/#limitations]，只需要这样做即可，其它类似的问题也是这样解决的，原理就是禁用mui组件中的自动聚焦的功能，从而阻断干扰。")]),t._v(" "),s("div",{staticClass:"language-jsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dialog")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("disableAutoFocus")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dialog")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);